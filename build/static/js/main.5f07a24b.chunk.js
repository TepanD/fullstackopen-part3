(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(2),c=t(15),u=t.n(c),r=(t(20),t(6)),i=t(3),o=t(4),l=t.n(o),d="https://thawing-garden-45844.herokuapp.com/api/persons",s={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},deletion:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))}},b=t(0),j=function(e){var n=e.input,t=e.handler;return Object(b.jsxs)("div",{children:["filter shown with:",Object(b.jsx)("input",{value:n,onChange:t,placeholder:"search name..."})]})},m=function(e){var n=e.message,t=e.update;return null===n?null:Object(b.jsx)("div",{className:!0===t?"update":"delete",children:n})},f=function(e){var n=e.adder,t=e.NameValue,a=e.NameHandler,c=e.NumberValue,u=e.NumberHandler;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name:"," ",Object(b.jsx)("input",{value:t,onChange:a,placeholder:"enter new name..."})]}),Object(b.jsxs)("div",{children:["number:"," ",Object(b.jsx)("input",{value:c,onChange:u,placeholder:"enter new number..."})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.persons,t=e.deleteFunction;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:[n.name," ",n.number," ",Object(b.jsx)("button",{onClick:t,children:"delete"})]})})},p=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],d=o[1],p=Object(a.useState)(""),O=Object(i.a)(p,2),v=O[0],x=O[1],w=Object(a.useState)(""),g=Object(i.a)(w,2),N=g[0],k=g[1],S=Object(a.useState)(null),C=Object(i.a)(S,2),y=C[0],A=C[1],H=Object(a.useState)(null),T=Object(i.a)(H,2),V=T[0],F=T[1],D=Object(a.useState)(!1),E=Object(i.a)(D,2),J=E[0],L=E[1];Object(a.useEffect)((function(){s.getAll().then((function(e){c(e)}))}),[]);var B=""===N?t:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(m,{message:y,update:V}),Object(b.jsx)(j,{input:N,handler:function(e){k(e.target.value)}}),Object(b.jsx)("h2",{children:"Add a new"}),Object(b.jsx)(f,{adder:function(e){e.preventDefault();var n={name:l,number:v},a=t.some((function(e){return e.name===n.name})),u=""===n.number||isNaN(n.number);if(u)window.alert("please input a valid phone number");else if(!u)if(a){if(window.confirm("".concat(n.name," is already added to phonebook, replcae the old number with a new one?"))){var i=t.find((function(e){return e.name===n.name})),o=Object(r.a)(Object(r.a)({},i),{},{number:n.number});s.update(i.id,o).then((function(e){c(t.map((function(n){return n.id!==i.id?n:e})))})).catch((function(){L(!0),A("".concat(i.name," was already removed from the server")),F(!1),setTimeout((function(){A(null),F(null)}),5e3),c(t.filter((function(e){return e.id!==i.id})))})),!1===J&&(A("".concat(n.name,"'s number has been changed")),F(!0),setTimeout((function(){A(null),F(null)}),5e3))}}else a||s.create(n).then((function(e){c(t.concat(e)),A("Added ".concat(n.name)),F(!0),setTimeout((function(){A(null),F(null)}),5e3),d(""),x("")}))},NameValue:l,NameHandler:function(e){d(e.target.value)},NumberValue:v,NumberHandler:function(e){x(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),B.map((function(e){return Object(b.jsx)(h,{persons:e,deleteFunction:function(){window.confirm("Delete ".concat(e.name," ?"))&&function(e){console.log("deleted person with id ".concat(e));var n=t.find((function(n){return n.id===e}));s.deletion(e).then((function(){var a=t.filter((function(n){return n.id!==e}));c(a),A("".concat(n.name," has been deleted")),setTimeout((function(){A(null)}),5e3)}))}(e.id)}},e.id)}))]})};u.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5f07a24b.chunk.js.map