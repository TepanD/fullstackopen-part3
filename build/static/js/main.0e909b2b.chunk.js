(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(15),u=t.n(a),r=(t(20),t(6)),o=t(3),i=t(4),l=t.n(i),d="/api/people",s={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},deletion:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))}},b=t(0),j=function(e){var n=e.input,t=e.handler;return Object(b.jsxs)("div",{children:["filter shown with:",Object(b.jsx)("input",{value:n,onChange:t,placeholder:"search name..."})]})},f=function(e){var n=e.message,t=e.update;return null===n?null:Object(b.jsx)("div",{className:!0===t?"update":"delete",children:n})},m=function(e){var n=e.adder,t=e.NameValue,c=e.NameHandler,a=e.NumberValue,u=e.NumberHandler;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name:"," ",Object(b.jsx)("input",{value:t,onChange:c,placeholder:"enter new name..."})]}),Object(b.jsxs)("div",{children:["number:"," ",Object(b.jsx)("input",{value:a,onChange:u,placeholder:"enter new number..."})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.persons,t=e.deleteFunction;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:[n.name," ",n.number," ",Object(b.jsx)("button",{onClick:t,children:"delete"})]})})},O=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),i=Object(o.a)(u,2),l=i[0],d=i[1],O=Object(c.useState)(""),p=Object(o.a)(O,2),v=p[0],x=p[1],w=Object(c.useState)(""),g=Object(o.a)(w,2),N=g[0],S=g[1],k=Object(c.useState)(null),C=Object(o.a)(k,2),T=C[0],y=C[1],A=Object(c.useState)(null),H=Object(o.a)(A,2),V=H[0],F=H[1],D=Object(c.useState)(!1),E=Object(o.a)(D,2),J=E[0],L=E[1];Object(c.useEffect)((function(){s.getAll().then((function(e){a(e)}))}),[]);var B=""===N?t:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(f,{message:T,update:V}),Object(b.jsx)(j,{input:N,handler:function(e){S(e.target.value)}}),Object(b.jsx)("h2",{children:"Add a new"}),Object(b.jsx)(m,{adder:function(e){e.preventDefault();var n={name:l,number:v},c=t.some((function(e){return e.name===n.name})),u=""===n.number||isNaN(n.number);if(u)window.alert("please input a valid phone number");else if(!u)if(c){if(window.confirm("".concat(n.name," is already added to phonebook, replcae the old number with a new one?"))){var o=t.find((function(e){return e.name===n.name})),i=Object(r.a)(Object(r.a)({},o),{},{number:n.number});s.update(o.id,i).then((function(e){a(t.map((function(n){return n.id!==o.id?n:e})))})).catch((function(){L(!0),y("".concat(o.name," was already removed from the server")),F(!1),setTimeout((function(){y(null),F(null)}),5e3),a(t.filter((function(e){return e.id!==o.id})))})),!1===J&&(y("".concat(n.name,"'s number has been changed")),F(!0),setTimeout((function(){y(null),F(null)}),5e3))}}else c||s.create(n).then((function(e){a(t.concat(e)),y("Added ".concat(n.name)),F(!0),setTimeout((function(){y(null),F(null)}),5e3),d(""),x("")})).catch((function(e){L(!0),y("".concat(e.response.data.error.message)),setTimeout((function(){y(null)}),5e3)}))},NameValue:l,NameHandler:function(e){d(e.target.value)},NumberValue:v,NumberHandler:function(e){x(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),B.map((function(e){return Object(b.jsx)(h,{persons:e,deleteFunction:function(){window.confirm("Delete ".concat(e.name," ?"))&&function(e){console.log("deleted person with id ".concat(e));var n=t.find((function(n){return n.id===e}));s.deletion(e).then((function(){var c=t.filter((function(n){return n.id!==e}));a(c),y("".concat(n.name," has been deleted")),setTimeout((function(){y(null)}),5e3)}))}(e.id)}},e.id)}))]})};u.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0e909b2b.chunk.js.map